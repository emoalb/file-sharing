(this["webpackJsonpfile-dropper-client"]=this["webpackJsonpfile-dropper-client"]||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n(10),r=n.n(i),a=(n(32),n(33),n(12)),s=n(23),l=n.n(s),o=(n(42),"/"),j="0.0.4",u=n(1),d=function(){var e=Object(a.useToasts)().addToast;return Object(u.jsx)(l.a,{getUploadParams:function(){return{url:o+"api/uploadFile"}},onChangeStatus:function(t,n){var c=t.meta;console.log(c,n),console.log(n,c),"preparing"===n&&e(n,{appearance:"info",autoDismiss:4}),"done"===n&&e(n,{appearance:"success",autoDismiss:4}),"exception_upload"===n&&e(n,{appearance:"error",autoDismiss:4})},onSubmit:function(e,t){console.log(e.map((function(e){return e.meta}))),t.forEach((function(e){return e.remove()}))},styles:{dropzone:{minHeight:200,maxHeight:250}}})},b=function(){return Object(u.jsx)("section",{id:"upload-page",children:Object(u.jsx)(a.ToastProvider,{children:Object(u.jsx)(d,{})})})},h=n(4),O=n(7),p=n(18),f=n.n(p),x=n(24);var m=n(25),v=n.n(m),g=function(e){var t=Object(c.useState)(!0),n=Object(O.a)(t,2),i=n[0],r=n[1];return Object(c.useEffect)((function(){setTimeout((function(){r(!1),e.callback&&e.callback()}),e.delay)}),[e]),i?Object(u.jsx)("div",{children:e.children}):Object(u.jsx)("div",{})},F=function(e){for(var t=c.createRef(),n=Object(c.useState)(e.items),i=Object(O.a)(n,2),r=i[0],a=(i[1],Object(c.useState)(1)),s=Object(O.a)(a,2),l=s[0],o=s[1],j=Object(c.useState)(!0),d=Object(O.a)(j,2),b=d[0],h=d[1],p=Object(c.useState)(10),f=Object(O.a)(p,2),x=f[0],m=f[1],F=l*x,k=F-x,N=r.slice(k,F),w=[],y=N.map((function(t,n){var c=t.fname,i=v()(t.date,"yyyy-mm-dd HH:MM:ss"),r=t.size.toFixed(2).trim().length<=8?(t.size/1024).toFixed(2)+" KB":(t.size/1048576).toFixed(2)+" MB";return console.log(c+"  "+t.size.toFixed(2).trim()+"  "+t.size.toFixed(2).trim().length),Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:c}),Object(u.jsx)("th",{children:r}),Object(u.jsx)("th",{children:i}),Object(u.jsx)("th",{children:Object(u.jsx)("button",{onClick:e.onAction.bind(undefined,t.fname),children:"Download"})})]},n)})),S=1;S<=Math.ceil(r.length/x);S++)w.push(S);var C=function(e){e.preventDefault(),o(Number(e.target.id))},D=w.map((function(e){var t=e===l;return Object(u.jsx)("li",{className:t?"current-page":"",id:e,onClick:C,children:e},e)}));return Object(u.jsxs)("div",{children:[Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"File name"}),Object(u.jsx)("th",{children:"Size"}),Object(u.jsx)("th",{children:"Date created"})]})}),Object(u.jsx)("tbody",{children:y})]}),Object(u.jsx)("ul",{id:"page-numbers",children:D}),Object(u.jsx)("div",{id:"page-nav",children:Object(u.jsxs)("form",{children:[Object(u.jsx)("label",{htmlFor:"page-input",children:"Go to page: "}),Object(u.jsx)("input",{id:"page-input",type:"text",ref:t}),Object(u.jsx)("label",{htmlFor:"items-per-page",children:"Items per page:"}),Object(u.jsxs)("select",{defaultValue:10,id:"items-per-page",onChange:function(e){m(Number(e.target.value)),o(1)},children:[Object(u.jsx)("option",{value:"3",children:"3"}),Object(u.jsx)("option",{value:"5",children:"5"}),Object(u.jsx)("option",{value:"10",children:"10"}),Object(u.jsx)("option",{value:"30",children:"30"}),Object(u.jsx)("option",{value:"100",children:"100"})]}),Object(u.jsx)("button",{onClick:function(e){if(e.preventDefault(),isNaN(t.current.value)||t.current.value>w.length||t.current.value<1)h(!1);else{var n=Number(t.current.value);h(!0),o(n)}t.current.value=""},children:"Go!"}),b?Object(u.jsx)("div",{}):Object(u.jsx)(g,{callback:function(){h(!0)},delay:1e3,children:Object(u.jsx)("p",{id:"message-incorrect-number-option",children:"Not a valid page option"})})]})})]})},k=function(e){console.log("Trying to download file with name "+e),fetch(o+"api/downloadFile/"+e).then((function(t){t.blob().then((function(t){var n=window.URL.createObjectURL(t),c=document.createElement("a");c.href=n,c.download=e,c.click()}))}))},N=function(){return Object(u.jsx)("p",{children:"No files Yet!"})},w=function(){var e=function(e){var t=Object(c.useState)([]),n=Object(O.a)(t,2),i=n[0],r=n[1],a=Object(c.useState)(!0),s=Object(O.a)(a,2),l=s[0],o=s[1],j=Object(c.useCallback)(function(){var t=Object(x.a)(f.a.mark((function t(n){var c,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,{signal:n.signal});case 3:return c=t.sent,t.next=6,c.json();case 6:i=t.sent,r(i),o(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),o(!0);case 14:return t.prev=14,o(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,11,14,17]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(c.useEffect)((function(){var e=new AbortController;return j(e).then((function(){o(!1)})),function(){return e.abort()}}),[j]),[i,l]}(o+"api/getFileListGson"),t=Object(O.a)(e,2),n=t[0],i=t[1];return Object(u.jsx)("section",{id:"all-files-page",children:i?Object(u.jsx)("div",{className:"loader",children:"Loading..."}):0===n.length?N():Object(u.jsx)(F,{items:n,onAction:k})})},y=n(11),S=function(e){return Object(u.jsx)("li",{className:"item-nav",children:Object(u.jsx)(y.b,{className:"link-nav",to:e.href,children:e.caption})})},C=function(e){return Object(u.jsxs)("nav",{children:[Object(u.jsxs)("h1",{children:["Spring Cloud Beta ",j]}),Object(u.jsxs)("ul",{className:"nav",children:[Object(u.jsx)(S,{caption:"Upload Files",href:"/"}),Object(u.jsx)(S,{caption:"List Files",href:"/list-files"})]})]})},D=function(e){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(C,{}),Object(u.jsxs)(h.c,{children:[Object(u.jsx)(h.a,{path:"/list-files",children:Object(u.jsx)(w,{})}),Object(u.jsx)(h.a,{path:"/",children:Object(u.jsx)(b,{})})]})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};r.a.render(Object(u.jsx)(y.a,{children:Object(u.jsx)(D,{})}),document.getElementById("root")),z()}},[[51,1,2]]]);
//# sourceMappingURL=main.d7f778f0.chunk.js.map